function init_background(){let n=[{zone:$("#design"),y:$("#design").offset().top-$(window).height()},{zone:$("#happy_clients"),y:$("#happy_clients").offset().top-$(window).height()},{zone:$("#map_block"),y:$("#map_block").offset().top-$(window).height()}],o=function(e){return e<n[1].y?0:e>=n[n.length-1].y?n.length-1:e>=n[1].y&&e<n[2].y?1:void 0},r=o($(window).scrollTop());$(document).trigger("scroll"),window.addEventListener("resize",function(e){for(var t of n)t.y=t.zone.offset().top-$(window).height();var i=$(".fixed-item").height();$(".fixed-cover").css("top",-1*i*o($(window).scrollTop()))}),document.addEventListener("scroll",function(e){var t=$(window).scrollTop(),i=$(".fixed-item").height();r=o(t),$(".fixed-cover").data("current")!=r&&($(".fixed-cover").css("top",-1*i*r),$(".fixed-cover").data("current",r))})}function init_mobile_navbar(){let a=200,c="easeOutCirc";$(".mobile-button").click(function(e){let n=$(window).scrollTop(),o=$(".mobile-button .line-decore"),r=parseFloat(o.css("height")),s=parseFloat(o.css("margin-bottom"));$(".mobile-nav-bar").data("visiable",!0),$(".mobile-nav-bar").css("display","flex"),$(".mobile-exit-button").css({top:o.position().top-1.2*(2*r+s)/2,left:o.position().left}),$(".exit-line").each((e,t)=>{var i=$(o[e]).position();$(t).css({top:i.top-n,left:i.left,opacity:1}),o.css("opacity",0),0==e?($(t).animate({top:i.top+r/2+s/2},a,c),$(t).css({transform:"rotate(45deg)"})):($(t).animate({top:i.top-r/2-s/2},a,c),$(t).css({transform:"rotate(-45deg)"}))}),$(".mobile-anchor").each((e,t)=>{$(t).delay(100*e).promise().then(()=>$(t).css({top:0,opacity:1}))})}),$(".mobile-exit-button").click(function(){let i=$(window).scrollTop();$(".exit-line").css("transform","rotate(0deg)"),$(".exit-line").each((e,t)=>{0==e?$(t).animate({top:$(".line-decore").first().position().top-i},a,c,()=>$(".line-decore").first().css("opacity",1)):$(t).animate({top:$(".line-decore").last().position().top-i},a,c,()=>$(".line-decore").last().css("opacity",1))}),$(".mobile-nav-bar").animate({opacity:0},800,c,()=>{$(".mobile-nav-bar").removeAttr("style"),$(".exit-line").removeAttr("style"),$(".mobile-anchor").removeAttr("style"),$(".mobile-exit-button").removeAttr("style"),$(".mobile-nav-bar").data("visiable",!1)})})}function reposition_exit_button(){if($(".mobile-nav-bar").data("visiable")){let n=$(window).scrollTop(),o=$(".mobile-button .line-decore"),r=parseFloat(o.css("height")),s=parseFloat(o.css("margin-bottom"));$(".mobile-exit-button").css({top:o.position().top-1.2*(2*r+s)/2,left:o.position().left}),$(".exit-line").each((e,t)=>{var i=$(o[e]).position();$(t).css({top:i.top-n,left:i.left,opacity:1}),0==e?$(t).css({top:i.top+r/2+s/2}):$(t).css({top:i.top-r/2-s/2})})}}function init_navigation(){let t=[$("#about_us"),$("#services"),$("#our_work"),$("#blog"),$("#map_block")];$(".mobile-anchor, .anchor").click(function(e){let i=$(e.currentTarget),n;i.parent().children().each((e,t)=>{t==i[0]&&(n=e)}),i.hasClass("mobile-anchor")&&$(".mobile-exit-button").trigger("click"),move_viewport_to(t[n].position().top)}),$(".more").click(function(e){move_viewport_to(t[0].position().top)})}function move_viewport_to(r){move_to({duration:function(){var e=$(window).height(),t=1.2*e,i=5*e;let n;var o=r-$(window).scrollTop();return n=Math.abs(o)<=t?.9*e:(2*e-i)*(2*e-t)/(Math.abs(o)-t)+i,Math.abs(o)/n*1e3}(),startPos:$(window).scrollTop(),pos:r+10,moveFunc:function({progress:e,startPos:t}){$(window).scrollTop(t+e)}})}function move_to({duration:n,startPos:o,pos:e,moveFunc:r}){let s=performance.now();let a=1.5*(e-o)/n;requestAnimationFrame(function e(t){var i=t-s,t=2*a*i/(3*Math.pow(n,2))*(3*n*i-2*Math.pow(i,2));r({progress:t,startPos:o,dur:n,tf:i}),i<=n&&requestAnimationFrame(e)})}function init_scrollActions(e){let t=[{item:$(".gallery").first(),innerItem:".g-item",innerItemDepends:!0,widthDepends:!0,initFunc:moveUpInitFunc,actionFunc:moveUp,triggerPoint:.8},{item:$("#statistics"),innerItem:".number",triggerPoint:.8,initFunc:numericInit,actionFunc:numericAction,innerItemDepends:!0},{item:$(".ser-content"),innerItem:".ser-item",triggerPoint:.8,initFunc:exponsiveInit,actionFunc:exponsiveAction,widthSensitive:!0,innerItemDepends:!0},{item:$("#design"),innerItemList:{iphone:{item:$("#design").find(".iphone"),done:!1},ipad:{item:$("#design").find(".ipad"),done:!1}},triggerPoint:.3,initFunc:designInit,actionFunc:designAction},{item:$(".wwd_exp").first(),innerItemList:{vslider:{item:$(".wwd_exp .vslider").first(),done:!1},burger:{item:$(".wwd_exp .burger").first(),done:!1}},widthDepends:!0,initFunc:burgerActionInit,actionFunc:burgerAction,triggerPoint:.8,data:{vsh:e.vsliderH}},{item:$(".slider-content").first(),triggerPoint:.8,initFunc:sliderActionInit,actionFunc:sliderAction},{item:$(".gallery").slice(1,2),innerItem:".g-item",innerItemDepends:!0,widthDepends:!0,initFunc:moveUpInitFunc,actionFunc:moveUp,triggerPoint:.8},{item:$("#partners"),innerItem:".partner",triggerPoint:.8,initFunc:exponsiveInit,actionFunc:exponsiveAction,widthSensitive:!1,innerItemDepends:!0},{item:$(".portfolio").first(),innerItem:".portf-item",innerItemDepends:!0,widthDepends:!0,initFunc:moveUpInitFunc,actionFunc:moveUp,triggerPoint:.8,randomOrder:!0,minVisiable:4},{item:$(".slider-content").slice(1,2),triggerPoint:.8,initFunc:sliderActionInit,actionFunc:sliderAction},{item:$(".clients").first(),innerItem:".client",triggerPoint:.8,initFunc:exponsiveInit,actionFunc:exponsiveAction,widthSensitive:!0,innerItemDepends:!0},{item:$(".blog").first(),innerItem:".record",innerItemDepends:!0,widthDepends:!0,initFunc:moveUpInitFunc,actionFunc:moveUp,triggerPoint:.8},{item:$("#map_block"),coverItem:$("footer"),initFunc:scrollMoveInit,actionFunc:scrollMove,triggerPoint:1}],i={i:0};function n(e,t){let i=e[t.i];(1==i.blockBottom&&i.item.offset().top+i.item.outerHeight()<$(window).scrollTop()+$(window).height()*i.triggerPoint||1!=i.blockBottom&&i.item.offset().top<=$(window).scrollTop()+$(window).height()*i.triggerPoint)&&1==i.actionFunc(i)&&(i.done=!0,t.i++)}!function(){for(var e of t){if(1==e.innerItemDepends){let i=[];e.item.find(e.innerItem).each((e,t)=>{i.push({item:$(t),done:!1})}),e.innerItems=i,e.innerIndex=0}null!=e.initFunc&&e.initFunc(e),e.done=!1}}(),document.addEventListener("scroll",function(e){i.i>=t.length||setTimeout(n,0,t,i)})}function moveUpInitFunc(e){let t;if(1==e.zeroIndent?t=0:null!=e.customIndent?t=e.customIndent:1==e.innerItemDepends&&(t=e.innerItems[0].item.width()/2),1==e.innerItemDepends)for(var i of e.innerItems)i.item.css({top:t,opacity:0});else e.item.css({top:t,opacity:0})}function moveUp(e){var i="easeOutCirc";if(1==e.innerItemDepends&&1==e.randomOrder){var n,o=e.innerItems;let t=[];for(n of o)n.item.offset().top<$(window).scrollTop()+$(window).height()*e.triggerPoint&&t.push(n);if(t.length>=e.minVisiable){var r,s,a=(()=>{let e=0;for(;;){if(Math.pow(10,e)>t.length)return Math.pow(10,e);e++}})(),c=t.length/2;let e=0;for(let e=0;e<Math.floor(c);e++){var l=Math.floor(Math.random()*a%c),d=Math.floor(Math.random()*a%c),m=t[d];t[d]=t[l],t[l]=m}for(r of t)0==r.done&&(r.item.delay(100*e).animate({top:0,opacity:1},1e3,i),r.done=!0,e++);for(s of o)if(0==s.done)return!1;return!0}}else if(1==e.innerItemDepends){if("column"==e.item.css("flex-direction"))return!(e.innerItems[e.innerIndex].item.offset().top>$(window).scrollTop()+$(window).height()*e.triggerPoint)&&(part=e.innerItems[e.innerIndex],part.done=!0,e.innerIndex++,part.item.animate({top:0,opacity:1},1e3,i),e.innerIndex>=e.innerItems.length||void 0);for(var t of e.innerItems)t.item.delay(100*e.innerIndex).animate({top:0,opacity:1},1e3,i),e.innerIndex++,t.done=!0;return!0}}function numericInit(e){for(var t of e.innerItems)t.value=t.item.text(),t.item.text("0")}function numericAction(e){for(let t of e.innerItems)t.done=!0,move_to({duration:500+500*Math.random(),startPos:0,pos:+t.value,moveFunc:function({progress:e}){t.item.text(Math.round(e))}});return!0}function exponsiveInit(e){var t,i=e.item.width()/2-e.innerItems[0].item.width()/2+parseFloat(e.item.css("margin-left")),n=e.item.offset().top;for(t of e.innerItems)t.triggerPos=t.item.offset().top,t.item.css({top:n-t.item.offset().top,left:i-t.item.offset().left,opacity:0})}function exponsiveAction(t){var i="easeOutExpo";if(!(1==t.widthSensitive&&t.innerItems[0].item.width()>=.8*t.item.width())){for(var e of t.innerItems)e.done=!0,e.item.animate({left:0,top:0,opacity:1},1500,i),e.innerIndex++;return!0}{let e=t.innerItems[t.innerIndex];if(e.triggerPos<$(window).scrollTop()+$(window).height()*t.triggerPoint&&(e.done=!0,t.innerIndex++,e.item.animate({left:0,top:0,opacity:1},1500,i),t.innerIndex>=t.innerItems.length))return!0}}function designInit(e){let t=e.innerItemList;for(var i in t)t[i].startPos=parseFloat(t[i].item.css("bottom"));t.ipad.item.css("bottom",.9*-t.ipad.item.height()),t.iphone.item.css("bottom",1.2*-t.iphone.item.height())}function designAction(e){let t=e.innerItemList;e="easeOutCirc";return t.ipad.item.animate({bottom:t.ipad.startPos},500,e),t.iphone.item.animate({bottom:t.iphone.startPos},600,e),!0}function sliderActionInit(e){let t=e.item;var i=parseFloat(t.css("width")),e=parseFloat(t.find(".slide").slice(1).css("margin-left"));t.find(".slides").css("left",i+e)}function sliderAction(e){return e.item.find(".slides").animate({left:0},700,"easeOutCirc"),!0}function burgerActionInit(e){let t=e.innerItemList.burger,i=e.innerItemList.vslider;i.item.find(".vslider-content").css("top",e.data.vsh),"row"==e.item.css("flex-direction")?t.item.css("left",i.item.width()-t.item.parent().width()):t.item.css("bottom",t.item.height()+parseFloat(t.item.css("margin-top")))}function burgerAction(e){let t=e.innerItemList.burger,i=e.innerItemList.vslider;if(0==i.done&&(i.item.find(".vslider-content").animate({top:0},700,"easeOutQuad"),i.done=!0),0==t.done&&(0==parseFloat(t.item.css("left"))?t.item.offset().top+t.item.height()<$(window).scrollTop()+$(window).height()*e.triggerPoint&&(t.item.animate({bottom:0},700,"easeOutCirc"),t.done=!0):(t.item.animate({left:0},700,"easeOutCirc"),t.done=!0)),t.done&&i.done)return!0}function scrollMoveInit(e){e.startCoverPos=parseFloat(e.coverItem.css("top")),e.coverItem.css("top",-1*e.item.outerHeight())}function scrollMove(e){var t=e.coverItem.outerHeight();let i,n=e.coverItem;e.item;i=t<=.5*$(window).height()?1:1-(t-.5*$(window).height())/t;var o=$(window).scrollTop()+$(window).height()*e.triggerPoint,t=n.offset().top+t*i;t<o&&((t=-1*parseFloat(n.css("top"))-(o-t))<=0?(n.css("top",0),e.done=!0):n.css("top",-1*t))}function slider_init(){function a(e,t,i,n){var o=parseFloat(e.children(".slider-content").css("width")),r=parseFloat(e.find(".slide").slice(1).css("margin-left"));let s;var a=e.find(".slide").length;let c,l;s=e.data("current")?e.data("current"):(e.data("current",1),1),"back"==t?c=1==s?a:s-1:"forward"==t&&(c=s==a?1:s+1),a=Math.abs((o+r)*(c-1)-parseFloat(e.find(".slides").css("left"))),l=(i=i<.2*$(window).width())?n:a/i,e.data("current",c),e.find(".slides").animate({left:-1*(c-1)*(r+o)},l,"easeOutCubic")}$(".back-arrow, .forward-arrow").click(function(e){var t=$(e.currentTarget).parent();$(e.currentTarget).hasClass("back-arrow")?a(t,"back",0,1e3):$(e.currentTarget).hasClass("forward-arrow")&&a(t,"forward",0,1e3)}),$(".slider-content").on("touchstart",function(e){var t=e.originalEvent;let i=$(e.currentTarget).parent();var n=i.data("current")?i.data("current"):1,o=parseFloat(i.find(".slide").slice(1).css("margin-left")),r=parseFloat($(e.currentTarget).css("width"));i.data("touch",t.touches[0].clientX),i.data("startPos",-(n-1)*r-(n-1)*o),i.data("pointNew",{x:t.touches[0].clientX,t:performance.now()}),e.preventDefault()}),$(".slider-content").on("touchmove",function(e){var t=e.originalEvent;let i=$(e.currentTarget).parent();e=t.touches[0].clientX-i.data("touch");i.find(".slides").css("left",i.data("startPos")+e),i.data("pointOld",i.data("pointNew")),i.data("pointNew",{x:t.touches[0].clientX,t:performance.now()})}),$(".slider-content").on("touchend",function(e){var t=e.originalEvent;let i=$(e.currentTarget).parent();var n=i.data("current")?i.data("current"):1,o=parseFloat(i.children(".slider-content").css("width")),r=parseFloat(i.find(".slide").slice(1).css("margin-left")),s=t.changedTouches[0].clientX-i.data("touch"),e=i.data("pointNew"),t=i.data("pointOld"),t=Math.abs((e.x-t.x)/(e.t-t.t));Math.abs(s)>=.2*o?s<0?a(i,"forward",t,500):0<s&&a(i,"back",t,500):i.find(".slides").animate({left:-1*(n-1)*(r+o)},500,"easeOutCubic")}),$(".back-arrow, .forward-arrow").mouseenter(function(e){$(e.currentTarget).find("object")[0].contentDocument.querySelector("svg").style.fill="#000"}),$(".back-arrow, .forward-arrow").mouseleave(function(e){$(e.currentTarget).find("object")[0].contentDocument.querySelector("svg").style.fill="#ccc"})}function positioning_slider_content(){$(".slider").each((e,t)=>{let i=$(t).find(".slider-content");var n=null==$(t).data("current")?1:$(t).data("current")-1,o=parseFloat(i.css("width")),t=parseFloat(i.find(".slide").slice(1).css("margin-left"));i.children(".slides").animate({left:-n*(o+t)},700,"easeOutCubic")})}$(function(){let r=380*parseFloat($("#what_we_do .vslider").css("width"))/570,t=$(".bur-item").length*parseFloat($(".bur-top").css("height"))+2*($(".bur-item").length-2)*parseFloat($(".bur-item").slice(1).css("margin-top")),s=r-t,a=$("#what_we_do .test"),n;function i(){$(a).css({width:$(".burger .ss-content").width(),fontFamily:"Roboto",fontStyle:"italic",fontWeight:300,padding:parseFloat($(".bur-wrapper").css("margin-top"))+1})}function o(){$("#what_we_do .vslider").css({height:r})}function c(){$(".slider").each(function(e,t){let i=$(t).children(".slider-content").css("width");n=i,$(t).find(".slide").each((e,t)=>$(t).css("width",i))})}function l(){$(".sn-item").each((e,t)=>$(t).css("height",$(t).css("width")))}function d(){$("#map").css("height",6*parseFloat($("#map").css("width"))/16)}i(),o(),$(".soc-link>object").on("load",function(e){e.currentTarget.contentDocument.querySelector("svg").style.fill="#95e1d3"}),SimpleScrollbar.initAll(),c(),l(),$(".sn-item").mouseenter(function(e){e.currentTarget.querySelector("object").contentDocument.querySelector("svg").style.fill="#fff"}),$(".sn-item").mouseleave(function(e){e.currentTarget.querySelector("object").contentDocument.querySelector("svg").style.fill="#f38181"}),$(".soc-link").mouseenter(function(e){e.currentTarget.querySelector("object").contentDocument.querySelector("svg").style.fill="#f38181"}),$(".soc-link").mouseleave(function(e){e.currentTarget.querySelector("object").contentDocument.querySelector("svg").style.fill="#95e1d3"}),d(),slider_init(),init_mobile_navbar(),init_navigation(),init_scrollActions({vsliderH:r}),init_background(),window.addEventListener("resize",function(e){r=380*parseFloat($("#what_we_do .vslider").css("width"))/570,t=$(".bur-item").length*(parseFloat($(".bur-top").css("height"))+parseFloat($(".bur-item").css("margin-bottom")))-parseFloat($(".bur-item").css("margin-bottom")),s=r-t,o(),i(),c(),l(),d(),reposition_exit_button(),positioning_slider_content(),$(".burger").each((e,t)=>{var i=null==$(t).data("current")?1:$(t).data("current");let n=$(t).children(".bur-item").slice(i-1,i),o;$(t).parent().find(".vslider-content").animate({top:-1*(i-1)*r},600,"easeOutQuad"),$(a).text($(n).find(".bur-wrapper").text()),o=$(a).outerHeight()<s?$(a).outerHeight():$(window).width()<=1200?$(a).outerHeight()<$(".vslider").height()?$(a).outerHeight():$(".vslider").height():s,n.hasClass("bur-desc-show")&&$(n).children(".bur-desc").css("height",o)})}),$(".bur-top").click(function(e){let n=$(e.currentTarget).parent();if(0==$(n).hasClass("bur-desc-show")){let i=0,e;$(a).text($(n).find(".bur-wrapper").text()),$(a).outerHeight()<s?(e=$(a).outerHeight(),$(n).parent().find(".ss-scroll").addClass("no-scrollbar")):(e=$(window).width()<=1200?$(a).outerHeight()<$(".vslider").height()?$(a).outerHeight():$(".vslider").height():s,$(n).parent().find(".ss-scroll").removeClass("no-scrollbar")),$(n).parent().children(".bur-desc-show").each((e,t)=>$(t).removeClass("bur-desc-show").children(".bur-desc").css("height","")),$(n).addClass("bur-desc-show").children(".bur-desc").css("height",e),$(n).parent().children(".bur-item").each((e,t)=>{t===n[0]&&(i=e)}),n.parent().data("current",i+1),$(".vslider .vslider-content").animate({top:-1*i*r},600,"easeOutQuad")}else $(n).removeClass("bur-desc-show").children(".bur-desc").css("height","")}),$("#preview").trigger("pageReadyShow")}),ymaps.ready(function(){map=new ymaps.Map("map",{center:[55.823250809107755,37.6104515498001],zoom:9});var t=[[55.682293892647124,37.76151306151981],[55.78148179135037,37.4099505615198],[55.607736779298456,37.43741638183226]];for(let e=0;e<t.length;e+=1)map.geoObjects.add(new ymaps.Placemark(t[e],{iconContent:e+1,hintContent:"Hint "+(e+1),balloonContentHeader:"<div class='map-ballon-header'>Hello I'm Balloon #"+(e+1)+"</div>",balloonContentBody:"<div class='map-ballon-body'>It's time to become acquainted. Lorem ipsum dolor sit amet consectetur adipisicing elit. Sequi atque atnulla culpa cum ducimus quam quo nesciunt praesentium corrupti et mollitia sapiente.</div>"},{preset:"islands#95e1d3Icon"}))});